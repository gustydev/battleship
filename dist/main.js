(()=>{var t={636:(t,r,o)=>{const e=o(432);function i(t){t.board.grid.forEach((t=>{t.ship&&(document.getElementById(`p1-${t.coord}`).style.backgroundColor="black")}))}function n(t,r,o){let e,i;e="Computer"===r.name?document.querySelector("div#board-2"):document.querySelector("div#board-1"),i=o?t.attack(r,o):t.attack(r);const n=document.getElementById(`p${e.id.slice(-1)}-${i}`);return!!i&&(r.board.grid.find((t=>t.coord===i)).ship?n.style.backgroundColor="red":n.style.backgroundColor="green",!0)}o(211),t.exports={craftBoards:function(){[document.querySelector("div#board-1"),document.querySelector("div#board-2")].forEach((t=>{t.innerHTML="";const r=t.id.match(/\d+$/);for(let o=1;o<11;o++){const e=document.createElement("div");e.classList.add("row"),e.id=`p${r}-row${o}`,t.appendChild(e)}t.childNodes.forEach((t=>{for(let o=65;o<75;o++){const e=String.fromCharCode(o),i=t.id.match(/\d+$/),n=document.createElement("div");n.classList.add("square"),n.id=`p${r}-${e}${i}`,t.appendChild(n)}}))}))},fillBoard:i,sendAttack:n,clickAttack:function(t,r){document.querySelector("div#board-2").querySelectorAll("div.square").forEach((o=>{o.addEventListener("click",(()=>{[...o.classList].includes("hit")||(o.classList.add("hit"),n(t,r,o.id.substring(3,6)),n(r,t))}))}))},manualShips:function(t){const r=document.querySelector("div.status"),o=document.querySelector("div#board-1").querySelectorAll("div.square"),n=[new e("Carrier",5),new e("Battleship",4),new e("Cruiser",3),new e("Submarine",3),new e("Destroyer",2)];let s="horizontal";const a=n[Symbol.iterator]();let c=a.next().value;r.textContent=`Place your ${c.name}`,o.forEach((o=>{let e;function n(){if(!c||"black"===o.style.backgroundColor)return;e&&e.forEach((t=>{"black"!==t.style.backgroundColor&&(t.style.backgroundColor="")}));let r=[],i=o;for(let t=0;t<c.size;t++){if(!i)return;const t=i.id.substring(3,6),o=t[0],e=Number(t.substring(1,3));r.push(i),i="horizontal"===s?i.nextSibling:document.querySelector(`div#p1-${o+(e-1)}`)}r.some((t=>"black"===t.style.backgroundColor))?console.log("lul"):(r.forEach((t=>{t.style.backgroundColor="rgb(0, 0, 0, 0.25)"})),o.addEventListener("mouseleave",(()=>{r.forEach((r=>{t.board.grid.find((t=>t.coord===r.id.substring(3,6))).ship||(r.style.backgroundColor="")}))})),e=r)}o.addEventListener("click",(function(){c&&t.board.placeShip(c,`${o.id.substring(3,6)}`,s)&&(i(t),c=a.next().value,r.textContent=c?`Place your ${c.name}`:"All ships placed!")})),o.addEventListener("mouseover",n),o.addEventListener("contextmenu",(t=>{t.preventDefault(),s="horizontal"===s?"vertical":"horizontal",n()}))}))}}},176:(t,r,o)=>{const e=o(636),i=e.craftBoards,n=e.fillBoard,s=e.clickAttack,a=e.manualShips,c=o(432),d=o(211);function l(t,r){return Math.round(Math.random()*(r-t)+t)}function u(t){const r=[new c("Carrier",5),new c("Battleship",4),new c("Cruiser",3),new c("Submarine",3),new c("Destroyer",2)],o=["horizontal","vertical"];r.forEach((r=>{let e,i,n,s,a;for(;!a;)e=l(65,74),i=l(1,10),n=`${String.fromCharCode(e)}${i}`,s=o[l(0,1)],a=t.board.placeShip(r,n,s)}))}function h(){const t={human:new d("Human"),comp:new d("Computer")},r=t.human,o=t.comp;i(),function(t,r){a(t),u(r)}(r,o),n(r),s(r,o)}t.exports={loadGame:h,checkWin:function(t,r){const o=setInterval((()=>{const e=[t,r],i=e.find((t=>t.board.allSunk())),n=e.find((t=>!t.board.allSunk()));i&&(alert(`All of ${i.name}'s ships sunk! ${n.name} wins!`),clearInterval(o),h())}),100,t,r)},randomizeShips:u}},906:t=>{t.exports=class{constructor(){this.grid=[];for(let t=1;t<11;t++)for(let r=65;r<75;r++)this.grid.push({coord:String.fromCharCode(r)+t,ship:void 0,isHit:!1});this.ships=[]}isOutOfBounds(t,r){return r<1||t.charCodeAt(0)>=75}coordIsTaken(t){return!!this.grid.find((r=>r.coord===t)).ship}placeShip(t,r,o){let e=r.slice(0,1),i=Number(r.slice(1));for(let r=0;r<t.size;r++){if(this.isOutOfBounds(e,i)||this.coordIsTaken(e+i))return!1;t.positions[r]={coord:e+i,isHit:!1},"vertical"===o?i-=1:e=String.fromCharCode(e.charCodeAt(0)+1)}const n=[];return t.positions.forEach((r=>{const o=this.grid.find((t=>t.coord===r.coord));o.ship=t.name,n.push(o)})),!this.ships.includes(t)&&(this.ships.push(t),n)}receiveAttack(t){const r=this.grid.find((r=>r.coord===t));if(r.isHit)return!1;r.isHit=!0;const o=this.ships.find((r=>r.positions.some((r=>r.coord===t))));return o&&o.hit(t),!0}allSunk(){return this.ships.every((t=>t.isSunk()))}}},211:(t,r,o)=>{const e=o(906);t.exports=class{constructor(t){this.name=t,this.board=new e}attack(t,r){if(!r){let r=t.board.grid[Math.floor(Math.random()*t.board.grid.length)];for(;!1!==r.isHit;)r=t.board.grid[Math.floor(Math.random()*t.board.grid.length)];return t.board.receiveAttack(r.coord),r.coord}return t.board.receiveAttack(r),r}}},432:t=>{t.exports=class{constructor(t,r){this.name=t,this.size=r,this.positions=Array(r);for(let t=0;t<this.positions.length;t++)this.positions[t]={coord:void 0,isHit:!1}}hit(t){const r=this.positions.find((r=>r.coord===t));return!r.isHit&&(r.isHit=!0,!0)}isSunk(){return this.positions.every((t=>!0===t.isHit))}}}},r={};(0,function o(e){var i=r[e];if(void 0!==i)return i.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,o),n.exports}(176).loadGame)()})();